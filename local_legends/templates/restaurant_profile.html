{% extends "base.html" %}
{% block content %}


{% if session.is_logged_in %}
<!--Started check for session BEFORE form so that the handle_leave_review 
        is never executed if the user is not logged in - another attempt at 
        defensive programming-->

<div class="container with-borders align-center card-panel grey lighten-5">
    <div class="row with-borders">
        <div class="col with-borders align-center">
            <h3>{{ restaurant.restaurant_name }}</h3>
        </div>
    </div>
    
   

    <div class="row with-borders">
        <!--<div class="col with-borders">-->
            <div class="row card-panel grey lighten-5">
                <form action="{{ url_for('handle_leave_review', restaurant_id=restaurant.restaurant_id) }}" method="POST">
                    
                    <!-- restaurant name -->
                    
                    <div class="row ">
                        <div class="col">
                            <h3>How would you rate your experience?</h3>
                        </div>
                    </div>
                    <!--<div class="row with-borders review-stars-row ">
                        <div class="col with-borders review-stars-div">
                            <h4 class="review-heading">Taste:</h4>
                        </div>
                        <div class="col review-stars-div">
                            <span><i class="fa-regular fa-star fa-2xl" style="color: #ede607;"></i></span>
                            <span><i class="fa-regular fa-star fa-2xl" style="color: #ede607;"></i></span>
                            <span><i class="fa-regular fa-star fa-2xl" style="color: #ede607;"></i></span>
                            <span><i class="fa-regular fa-star fa-2xl" style="color: #ede607;"></i></span>
                            <span><i class="fa-regular fa-star fa-2xl" style="color: #ede607;"></i></span>
                        </div>
                    </div>-->

                    <div class="row ">
                        <div class="col">
                            <h4><label for="edit_review_title">Review Title {{ reviews.review_id }}</label></h4>
                        </div>
                        <div class="col">
                            <h4><label for="edit_review_title">Overall Title {{ reviews.overall_stars }}</label></h4>
                        </div>
                        <div class="col"><input type="text" name="edit_review_title" id="edit_review_title"
                                value="{{ reviews.written_review_title }}"></div>
                    </div>
                    <div class="row ">
                        <div class="col">
                            <h4><label for="edit_written_review">Written Review {{ reviews.review_id }}</label></h4>
                        </div>
                        <div class="col"><input type="text" name="edit_written_review" id="edit_written_review"
                                value="{{ reviews.written_review }}"></div>
                    </div>
                    <div class="row ">
                        <div class="col">
                            <h4><label for="edit_taste_stars">How would you rate the taste?{{ reviews.taste_stars }}</label></h4>
                        </div>
                        <div class="col"><input type="text" name="edit_taste_stars" id="edit_taste_stars" value="{{ reviews.taste_stars }}">
                        </div>
                    </div>
                    <div class="row ">
                        <div class="col">
                            <h4><label for="edit_presentation_stars">How would you rate the presentation?{{ reviews.presentation }}</label>
                            </h4>
                        </div>
                        <div class="col"><input type="text" name="edit_presentation_stars" id="edit_presentation_stars"
                                value="{{ reviews.presentation }}"></div>
                    </div>
                    <div class="row ">
                        <div class="col">
                            <h4><label for="edit_friendliness_stars">How would you rate the friendliness?{{ reviews.friendliness }}</label>
                            </h4>
                        </div>
                        <div class="col"><input type="text" name="edit_friendliness_stars" id="edit_friendliness_stars"
                                value="{{ reviews.friendliness }}"></div>
                    </div>
                    <div class="row ">
                        <div class="col">
                            <h4><label for="edit_price_stars">How would you rate the price?{{ reviews.price }}</label></h4>
                        </div>
                        <div class="col"><input type="text" name="edit_price_stars" id="edit_price_stars" value="{{ reviews.price }}"></div>
                    </div>
                    <div class="row ">
                        <div class="col">
                            <h4><label for="edit_ambience_stars">How would you rate the ambience?{{ reviews.ambience_stars }}</label></h4>
                        </div>
                        <div class="col"><input type="text" name="edit_ambience_stars" id="edit_ambience_stars"
                                value="{{ reviews.ambience_stars }}"></div>
                    </div>
                    




                    <div class="row">
                        <div class="col s12 center-align">
                            <button type="submit" class="btn-large light-blue darken-1">Submit Review<i
                                    class="fas fa-edit right"></i>
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        <!--</div>-->
    </div>
</div>
{% endif %}


<h3 class="light-blue-text text-darken-4 center-align">Review List</h3>
{% for reviews in reviews %}
<div class="row align-center with-borders"></div>
<div class="card">
    <div class="card-image waves-effect waves-block waves-light">
        <img class="activator" src="https://en.wikipedia.org/wiki/File:Barbieri_-_ViaSophia25668.jpg">
    </div>
    <div class="card-content">
        <span class="card-title activator grey-text text-darken-4">{{ reviews.written_review_title }}<i
                class="material-icons right">See more</i></span>

    </div>
    <div class="card-reveal">
        <span class="card-title grey-text text-darken-4">{{ reviews.written_review }}<i class="material-icons right">close</i></span>
        <p>{{ reviews.review_id }}.</p>
        <p>{{ reviews.written_review }}.</p>
        <p>Overall: {{ reviews.overall_stars }}.</p>
       
    </div>
</div>
{% if session.is_logged_in %}
<div class="card-action">
    <a href="{{ url_for('edit_review', review_id=reviews.review_id) }}">Edit Review</a>

</div>
{% endif %}
{% endfor %}
</div>
{% endblock %}